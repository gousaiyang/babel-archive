
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Python Backport Compiler Utilities &#8212; bpc-utils 0.10.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="python-backport-compiler-utilities">
<h1>Python Backport Compiler Utilities<a class="headerlink" href="#python-backport-compiler-utilities" title="Permalink to this headline">¶</a></h1>
<p>Utility library for the Python <a class="reference external" href="https://github.com/pybpc/bpc"><code class="docutils literal notranslate"><span class="pre">bpc</span></code></a> backport compiler.</p>
<p>Currently, the three individual tools (<a class="reference external" href="https://github.com/pybpc/f2format"><code class="docutils literal notranslate"><span class="pre">f2format</span></code></a>, <a class="reference external" href="https://github.com/pybpc/poseur"><code class="docutils literal notranslate"><span class="pre">poseur</span></code></a>,
<a class="reference external" href="https://github.com/pybpc/walrus"><code class="docutils literal notranslate"><span class="pre">walrus</span></code></a>) depend on this repo. The <a class="reference external" href="https://github.com/pybpc/bpc"><code class="docutils literal notranslate"><span class="pre">bpc</span></code></a> compiler is a
work in progress.</p>
<div class="section" id="module-bpc_utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-bpc_utils" title="Permalink to this headline">¶</a></h2>
<p>Utility library for the Python bpc backport compiler.</p>
<dl class="py exception">
<dt id="bpc_utils.BPCInternalError">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">BPCInternalError</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#BPCInternalError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BPCInternalError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></a></p>
<p>Internal bug happened in BPC tools.</p>
<p>Initialize BPCInternalError.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>) – the error message</p></li>
<li><p><strong>context</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – describe the context/location/component where the bug happened</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">context</span></code> is not <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">message</span></code> (when converted to <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>) or <code class="docutils literal notranslate"><span class="pre">context</span></code> is empty or
    only contains whitespace characters</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt id="bpc_utils.BPCRecoveryError">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">BPCRecoveryError</span></code><a class="reference internal" href="_modules/bpc_utils/fileprocessing.html#BPCRecoveryError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BPCRecoveryError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></a></p>
<p>Error during file recovery.</p>
</dd></dl>

<dl class="py exception">
<dt id="bpc_utils.BPCSyntaxError">
<em class="property"><span class="pre">exception</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">BPCSyntaxError</span></code><a class="reference internal" href="_modules/bpc_utils/parsing.html#BPCSyntaxError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BPCSyntaxError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#SyntaxError" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SyntaxError</span></code></a></p>
<p>Syntax error detected when parsing code.</p>
</dd></dl>

<dl class="py class">
<dt id="bpc_utils.BaseContext">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">BaseContext</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>Abstract base class for general conversion context.</p>
<p>Initialize BaseContext.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.tree.NodeOrLeaf" title="(in parso v0.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NodeOrLeaf</span></code></a>) – parso AST</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#bpc_utils.Config" title="bpc_utils.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a>) – conversion configurations</p></li>
<li><p><strong>indent_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – current indentation level</p></li>
<li><p><strong>raw</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – raw processing flag</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="bpc_utils.BaseContext.__iadd__">
<em class="property"><span class="pre">final</span> </em><code class="sig-name descname"><span class="pre">__iadd__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext.__iadd__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext.__iadd__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support of the <code class="docutils literal notranslate"><span class="pre">+=</span></code> operator.</p>
<p>If <a class="reference internal" href="#bpc_utils.BaseContext._prefix_or_suffix" title="bpc_utils.BaseContext._prefix_or_suffix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self._prefix_or_suffix</span></code></a> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>,
then the <code class="docutils literal notranslate"><span class="pre">code</span></code> will be appended to <a class="reference internal" href="#bpc_utils.BaseContext._prefix" title="bpc_utils.BaseContext._prefix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self._prefix</span></code></a>;
else it will be appended to <a class="reference internal" href="#bpc_utils.BaseContext._suffix" title="bpc_utils.BaseContext._suffix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self._suffix</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – code string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#bpc_utils.BaseContext" title="bpc_utils.BaseContext">BaseContext</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext.__str__">
<em class="property"><span class="pre">final</span> </em><code class="sig-name descname"><span class="pre">__str__</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext.__str__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <em>stripped</em> version of <a class="reference internal" href="#bpc_utils.BaseContext._buffer" title="bpc_utils.BaseContext._buffer"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self._buffer</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext._concat">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">_concat</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext._concat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext._concat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate final string.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext._process">
<em class="property"><span class="pre">final</span> </em><code class="sig-name descname"><span class="pre">_process</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext._process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext._process" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively process parso AST.</p>
<p>All processing methods for a specific <code class="docutils literal notranslate"><span class="pre">node</span></code> type are defined as
<code class="docutils literal notranslate"><span class="pre">_process_{type}</span></code>. This method first checks if such processing
method exists. If so, it will call such method on the <code class="docutils literal notranslate"><span class="pre">node</span></code>;
otherwise it will traverse through all <em>children</em> of <code class="docutils literal notranslate"><span class="pre">node</span></code>, and perform
the same logic on each child.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.tree.NodeOrLeaf" title="(in parso v0.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NodeOrLeaf</span></code></a>) – parso AST</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext._walk">
<em class="property"><span class="pre">final</span> </em><code class="sig-name descname"><span class="pre">_walk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext._walk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext._walk" title="Permalink to this definition">¶</a></dt>
<dd><p>Start traversing the AST module.</p>
<p>The method traverses through all <em>children</em> of <code class="docutils literal notranslate"><span class="pre">node</span></code>. It first checks
if such child has the target expression. If so, it will toggle
<a class="reference internal" href="#bpc_utils.BaseContext._prefix_or_suffix" title="bpc_utils.BaseContext._prefix_or_suffix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self._prefix_or_suffix</span></code></a>
(set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>) and save the last previous child as
<a class="reference internal" href="#bpc_utils.BaseContext._node_before_expr" title="bpc_utils.BaseContext._node_before_expr"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self._node_before_expr</span></code></a>.
Then it processes the child with <a class="reference internal" href="#bpc_utils.BaseContext._process" title="bpc_utils.BaseContext._process"><code class="xref py py-meth docutils literal notranslate"><span class="pre">self._process</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.tree.NodeOrLeaf" title="(in parso v0.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NodeOrLeaf</span></code></a>) – parso AST</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext.extract_whitespaces">
<em class="property"><span class="pre">final</span> <span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">extract_whitespaces</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext.extract_whitespaces"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext.extract_whitespaces" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract preceding and succeeding whitespaces from the code given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the code to extract whitespaces</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a tuple of <em>preceding</em> and <em>succeeding</em> whitespaces in <code class="docutils literal notranslate"><span class="pre">code</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext.has_expr">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">has_expr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext.has_expr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext.has_expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if node has the target expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.tree.NodeOrLeaf" title="(in parso v0.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NodeOrLeaf</span></code></a>) – parso AST</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>whether <code class="docutils literal notranslate"><span class="pre">node</span></code> has the target expression</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext.mangle">
<em class="property"><span class="pre">final</span> <span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">mangle</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext.mangle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext.mangle" title="Permalink to this definition">¶</a></dt>
<dd><p>Mangle variable names.</p>
<p>This method mangles variable names as described in <a class="reference external" href="https://docs.python.org/3/reference/expressions.html#atom-identifiers">Python documentation about mangling</a>
and further normalizes the mangled variable name through <a class="reference internal" href="#bpc_utils.BaseContext.normalize" title="bpc_utils.BaseContext.normalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">normalize()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – class name</p></li>
<li><p><strong>var_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – variable name</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>mangled and normalized variable name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext.missing_newlines">
<em class="property"><span class="pre">final</span> <span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">missing_newlines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linesep</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext.missing_newlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext.missing_newlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Count missing blank lines for code insertion given surrounding code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – preceding source code</p></li>
<li><p><strong>suffix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – succeeding source code</p></li>
<li><p><strong>expected</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – number of expected blank lines</p></li>
<li><p><strong>linesep</strong> (<a class="reference internal" href="#bpc_utils.bpc_utils.Linesep" title="bpc_utils.bpc_utils.Linesep"><code class="xref py py-data docutils literal notranslate"><span class="pre">Linesep</span></code></a>) – line seperator</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>number of blank lines to add</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext.normalize">
<em class="property"><span class="pre">final</span> <span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">normalize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext.normalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize variable names.</p>
<p>This method normalizes variable names as described in <a class="reference external" href="https://docs.python.org/3/reference/lexical_analysis.html#identifiers">Python documentation about identifiers</a>
and <span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3131"><strong>PEP 3131</strong></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – variable name as it appears in the source code</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>normalized variable name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext.split_comments">
<em class="property"><span class="pre">final</span> <span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">split_comments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linesep</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/context.html#BaseContext.split_comments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.BaseContext.split_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Separates prefixing comments from code.</p>
<p>This method separates <em>prefixing</em> comments and <em>suffixing</em> code. It is
rather useful when inserting code might break <a class="reference external" href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a> and encoding
cookies (<span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0263"><strong>PEP 263</strong></a>), etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the code to split comments</p></li>
<li><p><strong>linesep</strong> (<a class="reference internal" href="#bpc_utils.bpc_utils.Linesep" title="bpc_utils.bpc_utils.Linesep"><code class="xref py py-data docutils literal notranslate"><span class="pre">Linesep</span></code></a>) – line seperator</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a tuple of <em>prefix comments</em> and <em>suffix code</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._buffer">
<code class="sig-name descname"><span class="pre">_buffer</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#bpc_utils.BaseContext._buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Final converted result.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._indent_level">
<code class="sig-name descname"><span class="pre">_indent_level</span></code><em class="property"><span class="pre">:</span> <span class="pre">Final</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bpc_utils.BaseContext._indent_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Current indentation level.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._indentation">
<code class="sig-name descname"><span class="pre">_indentation</span></code><em class="property"><span class="pre">:</span> <span class="pre">Final</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bpc_utils.BaseContext._indentation" title="Permalink to this definition">¶</a></dt>
<dd><p>Indentation sequence.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._linesep">
<code class="sig-name descname"><span class="pre">_linesep</span></code><em class="property"><span class="pre">:</span> <span class="pre">Final[Literal[</span>
<span class="pre">,</span>  
<span class="pre">,</span> <span class="pre">]]</span></em><a class="headerlink" href="#bpc_utils.BaseContext._linesep" title="Permalink to this definition">¶</a></dt>
<dd><p>Line seperator.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Final[<a class="reference internal" href="#bpc_utils.bpc_utils.Linesep" title="bpc_utils.bpc_utils.Linesep"><code class="xref py py-data docutils literal notranslate"><span class="pre">Linesep</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._node_before_expr">
<code class="sig-name descname"><span class="pre">_node_before_expr</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.tree.NodeOrLeaf" title="(in parso v0.7)"><span class="pre">parso.tree.NodeOrLeaf</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bpc_utils.BaseContext._node_before_expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Preceding node with the target expression, i.e. the <em>insertion point</em>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._pep8">
<code class="sig-name descname"><span class="pre">_pep8</span></code><em class="property"><span class="pre">:</span> <span class="pre">Final</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bpc_utils.BaseContext._pep8" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="target" id="index-2"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a> compliant conversion flag.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._prefix">
<code class="sig-name descname"><span class="pre">_prefix</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#bpc_utils.BaseContext._prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Code before insertion point.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._prefix_or_suffix">
<code class="sig-name descname"><span class="pre">_prefix_or_suffix</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></em><a class="headerlink" href="#bpc_utils.BaseContext._prefix_or_suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to indicate whether buffer is now <a class="reference internal" href="#bpc_utils.BaseContext._prefix" title="bpc_utils.BaseContext._prefix"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self._prefix</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._root">
<code class="sig-name descname"><span class="pre">_root</span></code><em class="property"><span class="pre">:</span> <span class="pre">Final</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.tree.NodeOrLeaf" title="(in parso v0.7)"><span class="pre">parso.tree.NodeOrLeaf</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bpc_utils.BaseContext._root" title="Permalink to this definition">¶</a></dt>
<dd><p>Root node given by the <code class="docutils literal notranslate"><span class="pre">node</span></code> parameter.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._suffix">
<code class="sig-name descname"><span class="pre">_suffix</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></em><a class="headerlink" href="#bpc_utils.BaseContext._suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>Code after insertion point.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext._uuid_gen">
<code class="sig-name descname"><span class="pre">_uuid_gen</span></code><em class="property"><span class="pre">:</span> <span class="pre">Final</span><span class="p"><span class="pre">[</span></span><span class="pre">bpc_utils.misc.UUID4Generator</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bpc_utils.BaseContext._uuid_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>UUID generator.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.BaseContext.config">
<code class="sig-name descname"><span class="pre">config</span></code><em class="property"><span class="pre">:</span> <span class="pre">Final</span><span class="p"><span class="pre">[</span></span><span class="pre">bpc_utils.misc.Config</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#bpc_utils.BaseContext.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal configurations.</p>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.BaseContext.string">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">string</span></code><a class="headerlink" href="#bpc_utils.BaseContext.string" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns conversion buffer (<a class="reference internal" href="#bpc_utils.BaseContext._buffer" title="bpc_utils.BaseContext._buffer"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self._buffer</span></code></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="bpc_utils.Config">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">Config</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#Config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableMapping" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.MutableMapping</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>]</p>
<p>Configuration namespace.</p>
<p>This class is inspired from <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.Namespace</span></code></a> for storing
internal attributes and/or configuration variables.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">foo</span>
<span class="go">&#39;var&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="s1">&#39;boo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span>
<span class="go">Config(bar=&#39;boo&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="bpc_utils.Placeholder">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">Placeholder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#Placeholder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.Placeholder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Placeholder for string interpolation.</p>
<p><a class="reference internal" href="#bpc_utils.Placeholder" title="bpc_utils.Placeholder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code></a> objects can be concatenated with <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, other <a class="reference internal" href="#bpc_utils.Placeholder" title="bpc_utils.Placeholder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code></a> objects
and <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> objects via the ‘+’ operator.</p>
<p><a class="reference internal" href="#bpc_utils.Placeholder" title="bpc_utils.Placeholder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code></a> objects should be regarded as immutable. Please do not modify the <code class="docutils literal notranslate"><span class="pre">name</span></code>
attribute. Build new objects instead.</p>
<p>Initialize Placeholder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – name of the placeholder</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">name</span></code> is not <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="bpc_utils.StringInterpolation">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">StringInterpolation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#StringInterpolation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.StringInterpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A string with placeholders to be filled in.</p>
<p>This looks like an object-oriented format string, but making sure that string literals are
always interpreted literally (so no need to manually do escaping). The boundaries between string
literals and placeholders are very clear. Filling in a placeholder will never inject a new
placeholder, protecting string integrity for multiple-round interpolation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%(injected)s</span><span class="s1">&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">StringInterpolation</span><span class="p">(</span><span class="s1">&#39;prefix &#39;</span><span class="p">,</span> <span class="n">Placeholder</span><span class="p">(</span><span class="s1">&#39;q1&#39;</span><span class="p">),</span> <span class="s1">&#39; infix &#39;</span><span class="p">,</span> <span class="n">Placeholder</span><span class="p">(</span><span class="s1">&#39;q2&#39;</span><span class="p">),</span> <span class="s1">&#39; suffix&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">s</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;q1&#39;</span><span class="p">:</span> <span class="n">s1</span><span class="p">}</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;q2&#39;</span><span class="p">:</span> <span class="n">s2</span><span class="p">})</span>
<span class="go">&#39;prefix %(injected)s infix hello suffix&#39;</span>
</pre></div>
</div>
<p>(This can be regarded as an improved version of <a class="reference external" href="https://docs.python.org/3/library/string.html#string.Template.safe_substitute" title="(in Python v3.9)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">string.Template.safe_substitute()</span></code></a>.)</p>
<p>Multiple-round interpolation is tricky to do with a traditional format string. In order to do things
correctly and avoid format string injection vulnerabilities, you need to perform escapes very carefully.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="s1">&#39;prefix </span><span class="si">%(q1)s</span><span class="s1"> infix </span><span class="si">%(q2)s</span><span class="s1"> suffix&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;q1&#39;</span><span class="p">:</span> <span class="n">s1</span><span class="p">}</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;q2&#39;</span><span class="p">:</span> <span class="n">s2</span><span class="p">}</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;q2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="s1">&#39;prefix </span><span class="si">%(q1)s</span><span class="s1"> infix </span><span class="si">%%</span><span class="s1">(q2)s suffix&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;q1&#39;</span><span class="p">:</span> <span class="n">s1</span><span class="p">}</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;q2&#39;</span><span class="p">:</span> <span class="n">s2</span><span class="p">}</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;injected&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;q1&#39;</span><span class="p">:</span> <span class="n">s1</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">&#39;</span><span class="p">)}</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;q2&#39;</span><span class="p">:</span> <span class="n">s2</span><span class="p">}</span>
<span class="go">&#39;prefix %(injected)s infix hello suffix&#39;</span>
</pre></div>
</div>
<p><a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> objects can be concatenated with <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="#bpc_utils.Placeholder" title="bpc_utils.Placeholder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code></a> objects
and other <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> objects via the ‘+’ operator.</p>
<p><a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> objects should be regarded as immutable. Please do not modify the
<code class="docutils literal notranslate"><span class="pre">literals</span></code> and <code class="docutils literal notranslate"><span class="pre">placeholders</span></code> attributes. Build new objects instead.</p>
<p>Initialize StringInterpolation. <code class="docutils literal notranslate"><span class="pre">args</span></code> will be concatenated to construct a
<a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">StringInterpolation</span><span class="p">(</span><span class="s1">&#39;prefix&#39;</span><span class="p">,</span> <span class="n">Placeholder</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">),</span> <span class="s1">&#39;suffix&#39;</span><span class="p">)</span>
<span class="go">StringInterpolation(&#39;prefix&#39;, Placeholder(&#39;data&#39;), &#39;suffix&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code>]) – the components to construct a <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object</p>
</dd>
</dl>
<dl class="py method">
<dt id="bpc_utils.StringInterpolation.__mod__">
<code class="sig-name descname"><span class="pre">__mod__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">substitutions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#StringInterpolation.__mod__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.StringInterpolation.__mod__" title="Permalink to this definition">¶</a></dt>
<dd><p>Substitute the placeholders in this <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object with string values (if possible)
according to the <code class="docutils literal notranslate"><span class="pre">substitutions</span></code> mapping.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">StringInterpolation</span><span class="p">(</span><span class="s1">&#39;prefix &#39;</span><span class="p">,</span> <span class="n">Placeholder</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">),</span> <span class="s1">&#39; suffix&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;hello&#39;</span><span class="p">}</span>
<span class="go">StringInterpolation(&#39;prefix hello suffix&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>substitutions</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>]) – a mapping from placeholder names to the values to be filled in; all values
are converted into <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a new <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object with as many placeholders substituted as possible</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.StringInterpolation.__str__">
<code class="sig-name descname"><span class="pre">__str__</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#StringInterpolation.__str__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.StringInterpolation.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the fully-substituted string interpolation result.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">StringInterpolation</span><span class="p">(</span><span class="s1">&#39;prefix hello suffix&#39;</span><span class="p">))</span>
<span class="go">&#39;prefix hello suffix&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the fully-substituted string interpolation result</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – if there are still unsubstituted placeholders in this <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.StringInterpolation.from_components">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">from_components</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">literals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">placeholders</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#StringInterpolation.from_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.StringInterpolation.from_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object from <code class="docutils literal notranslate"><span class="pre">literals</span></code> and <code class="docutils literal notranslate"><span class="pre">placeholders</span></code> components.
This method is more efficient than the <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-func docutils literal notranslate"><span class="pre">StringInterpolation()</span></code></a> constructor, but it is mainly
intended for internal use.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">StringInterpolation</span><span class="o">.</span><span class="n">from_components</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s1">&#39;prefix&#39;</span><span class="p">,</span> <span class="s1">&#39;infix&#39;</span><span class="p">,</span> <span class="s1">&#39;suffix&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">Placeholder</span><span class="p">(</span><span class="s1">&#39;data1&#39;</span><span class="p">),</span> <span class="n">Placeholder</span><span class="p">(</span><span class="s1">&#39;data2&#39;</span><span class="p">))</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">StringInterpolation(&#39;prefix&#39;, Placeholder(&#39;data1&#39;), &#39;infix&#39;, Placeholder(&#39;data2&#39;), &#39;suffix&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>literals</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – the literal components in order</p></li>
<li><p><strong>placeholders</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code>]) – the <a class="reference internal" href="#bpc_utils.Placeholder" title="bpc_utils.Placeholder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code></a> components in order</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the constructed <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">literals</span></code> is <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>; if <code class="docutils literal notranslate"><span class="pre">literals</span></code> contains non-<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> values;
    if <code class="docutils literal notranslate"><span class="pre">placeholders</span></code> contains non-<a class="reference internal" href="#bpc_utils.Placeholder" title="bpc_utils.Placeholder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code></a> values</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – if the length of <code class="docutils literal notranslate"><span class="pre">literals</span></code> is not exactly one more than the length of <code class="docutils literal notranslate"><span class="pre">placeholders</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.StringInterpolation.iter_components">
<code class="sig-name descname"><span class="pre">iter_components</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#StringInterpolation.iter_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.StringInterpolation.iter_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator to iterate all components of this <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object in order.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">StringInterpolation</span><span class="p">(</span><span class="s1">&#39;prefix&#39;</span><span class="p">,</span> <span class="n">Placeholder</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">),</span> <span class="s1">&#39;suffix&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iter_components</span><span class="p">())</span>
<span class="go">[&#39;prefix&#39;, Placeholder(&#39;data&#39;), &#39;suffix&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Placeholder</span></code>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>generator containing the components of this <a class="reference internal" href="#bpc_utils.StringInterpolation" title="bpc_utils.StringInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringInterpolation</span></code></a> object in order</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.StringInterpolation.result">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">result</span></code><a class="headerlink" href="#bpc_utils.StringInterpolation.result" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias of <a class="reference internal" href="#bpc_utils.StringInterpolation.__str__" title="bpc_utils.StringInterpolation.__str__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StringInterpolation.__str__()</span></code></a> to get the fully-substituted string interpolation result.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">StringInterpolation</span><span class="p">(</span><span class="s1">&#39;prefix hello suffix&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">result</span>
<span class="go">&#39;prefix hello suffix&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="bpc_utils.UUID4Generator">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">UUID4Generator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#UUID4Generator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.UUID4Generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>UUID 4 generator wrapper to prevent UUID collisions.</p>
<p>Constructor of UUID 4 generator wrapper.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dash</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether the generated UUID string has dashes or not</p>
</dd>
</dl>
<dl class="py method">
<dt id="bpc_utils.UUID4Generator.gen">
<code class="sig-name descname"><span class="pre">gen</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#UUID4Generator.gen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.UUID4Generator.gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a new UUID 4 string that is guaranteed not to collide with used UUIDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a new UUID 4 string</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="bpc_utils.TaskLock">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">TaskLock</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/multiprocessing.html#TaskLock"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.TaskLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that returns a lock for possibly concurrent tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ContextManager" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextManager</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a lock for possibly concurrent tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.archive_files">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">archive_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">archive_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/fileprocessing.html#archive_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.archive_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Archive the list of files into a <em>tar</em> file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – a list of files to be archived (should be <em>absolute path</em>)</p></li>
<li><p><strong>archive_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the directory to save the archive</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>path to the generated <em>tar</em> archive</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.detect_encoding">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">detect_encoding</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/parsing.html#detect_encoding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.detect_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect encoding of Python source code as specified in <span class="target" id="index-3"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0263"><strong>PEP 263</strong></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>) – the code to detect encoding</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the detected encoding, or the default encoding (<code class="docutils literal notranslate"><span class="pre">utf-8</span></code>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">code</span></code> is not a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code></a> string</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#SyntaxError" title="(in Python v3.9)"><strong>SyntaxError</strong></a> – if both a BOM and a cookie are present, but disagree</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.detect_files">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">detect_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/fileprocessing.html#detect_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.detect_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of Python files to be processed according to user input.</p>
<p>This will perform <em>glob</em> expansion on Windows, make all paths absolute,
resolve symbolic links and remove duplicates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>files</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – a list of files and directories to process (usually provided by users on command-line)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of Python files to be processed</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="#bpc_utils.fileprocessing.expand_glob_iter" title="bpc_utils.fileprocessing.expand_glob_iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">expand_glob_iter()</span></code></a> for more information.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.detect_indentation">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">detect_indentation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/parsing.html#detect_indentation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.detect_indentation" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect indentation of Python source code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TextIO" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextIO</span></code></a>, <a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.tree.NodeOrLeaf" title="(in parso v0.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NodeOrLeaf</span></code></a>]) – the code to detect indentation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the detected indentation sequence</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/tokenize.html#tokenize.TokenError" title="(in Python v3.9)"><strong>TokenError</strong></a> – when failed to tokenize the source code under certain cases,
    see documentation of <a class="reference external" href="https://docs.python.org/3/library/tokenize.html#tokenize.TokenError" title="(in Python v3.9)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TokenError</span></code></a> for more details</p>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>In case of mixed indentation, try voting by the number of occurrences of
each indentation value (<em>spaces</em> and <em>tabs</em>).</p>
<p>When there is a tie between <em>spaces</em> and <em>tabs</em>, prefer <strong>4 spaces</strong> for <span class="target" id="index-4"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.detect_linesep">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">detect_linesep</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/parsing.html#detect_linesep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.detect_linesep" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect linesep of Python source code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TextIO" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextIO</span></code></a>, <a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.tree.NodeOrLeaf" title="(in parso v0.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NodeOrLeaf</span></code></a>]) – the code to detect linesep</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the detected linesep (one of <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>, <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code> and <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#bpc_utils.bpc_utils.Linesep" title="bpc_utils.bpc_utils.Linesep"><code class="xref py py-data docutils literal notranslate"><span class="pre">Linesep</span></code></a></p>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>In case of mixed linesep, try voting by the number of occurrences of each linesep value.</p>
<p>When there is a tie, prefer <code class="docutils literal notranslate"><span class="pre">LF</span></code> to <code class="docutils literal notranslate"><span class="pre">CRLF</span></code>, prefer <code class="docutils literal notranslate"><span class="pre">CRLF</span></code> to <code class="docutils literal notranslate"><span class="pre">CR</span></code>.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.first_non_none">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">first_non_none</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#first_non_none"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.first_non_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first non-<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> value from a list of values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args</strong> – <p>variable length argument list</p>
<ul class="simple">
<li><p>If one positional argument is provided, it should be an iterable of the values.</p></li>
<li><p>If two or more positional arguments are provided, then the value list is the positional argument list.</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the first non-<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> value, if all values are <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> or sequence is empty, return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if no arguments provided</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.first_truthy">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">first_truthy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#first_truthy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.first_truthy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first <em>truthy</em> value from a list of values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args</strong> – <p>variable length argument list</p>
<ul class="simple">
<li><p>If one positional argument is provided, it should be an iterable of the values.</p></li>
<li><p>If two or more positional arguments are provided, then the value list is the positional argument list.</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the first <em>truthy</em> value, if no <em>truthy</em> values found or sequence is empty, return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if no arguments provided</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.getLogger">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">getLogger</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/logging.html#getLogger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.getLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a BPC logger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – name for the logger</p></li>
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – log level for the logger</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the created logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.get_parso_grammar_versions">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">get_parso_grammar_versions</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">minimum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/parsing.html#get_parso_grammar_versions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.get_parso_grammar_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Python versions that parso supports to parse grammar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>minimum</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – filter result by this minimum version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of Python versions that parso supports to parse grammar</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">minimum</span></code> is not <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">minimum</span></code> is invalid</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.map_tasks">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">map_tasks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">posargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/multiprocessing.html#map_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.map_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute tasks in parallel if <a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> is available, otherwise execute them sequentially.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></a>[…, ~T]) – the task function to execute</p></li>
<li><p><strong>iterable</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>]) – the items to process</p></li>
<li><p><strong>posargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>]]) – additional positional arguments to pass to <code class="docutils literal notranslate"><span class="pre">func</span></code></p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>]]) – keyword arguments to pass to <code class="docutils literal notranslate"><span class="pre">func</span></code></p></li>
<li><p><strong>processes</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – the number of worker processes (default: auto determine)</p></li>
<li><p><strong>chunksize</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – chunk size for multiprocessing</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[~T]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the return values of the task function applied on the input items and additional arguments</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.parse_boolean_state">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">parse_boolean_state</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/argparse.html#parse_boolean_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.parse_boolean_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a boolean state from a string representation.</p>
<ul class="simple">
<li><p>These values are regarded as <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>: <code class="docutils literal notranslate"><span class="pre">'1'</span></code>, <code class="docutils literal notranslate"><span class="pre">'yes'</span></code>, <code class="docutils literal notranslate"><span class="pre">'y'</span></code>, <code class="docutils literal notranslate"><span class="pre">'true'</span></code>, <code class="docutils literal notranslate"><span class="pre">'on'</span></code></p></li>
<li><p>These values are regarded as <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>: <code class="docutils literal notranslate"><span class="pre">'0'</span></code>, <code class="docutils literal notranslate"><span class="pre">'no'</span></code>, <code class="docutils literal notranslate"><span class="pre">'n'</span></code>, <code class="docutils literal notranslate"><span class="pre">'false'</span></code>, <code class="docutils literal notranslate"><span class="pre">'off'</span></code></p></li>
</ul>
<p>Value matching is case <strong>insensitive</strong>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – string representation of a boolean state</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the parsed boolean result, return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> if input is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">s</span></code> is an invalid boolean state value</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="#bpc_utils.bpc_utils.argparse._boolean_state_lookup" title="bpc_utils.bpc_utils.argparse._boolean_state_lookup"><code class="xref py py-data docutils literal notranslate"><span class="pre">_boolean_state_lookup</span></code></a> for default lookup mapping values.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.parse_indentation">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">parse_indentation</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/argparse.html#parse_indentation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.parse_indentation" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse indentation from a string representation.</p>
<ul class="simple">
<li><p>If an integer or a string of positive integer <code class="docutils literal notranslate"><span class="pre">n</span></code> is specified, then indentation is <code class="docutils literal notranslate"><span class="pre">n</span></code> spaces.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">'t'</span></code> or <code class="docutils literal notranslate"><span class="pre">'tab'</span></code> is specified, then indentation is tab.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">'\t'</span></code>  (the tab character itself) or a string consisting only of the space character (U+0020)
is specified, it is returned directly.</p></li>
</ul>
<p>Value matching is <strong>case insensitive</strong>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – string representation of indentation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the parsed indentation result, return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> if input is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> or empty string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">s</span></code> is not <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">s</span></code> is an invalid indentation value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.parse_linesep">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">parse_linesep</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/argparse.html#parse_linesep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.parse_linesep" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse linesep from a string representation.</p>
<ul class="simple">
<li><p>These values are regarded as <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>: <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>, <code class="docutils literal notranslate"><span class="pre">'lf'</span></code></p></li>
<li><p>These values are regarded as <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>: <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>, <code class="docutils literal notranslate"><span class="pre">'crlf'</span></code></p></li>
<li><p>These values are regarded as <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>: <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>, <code class="docutils literal notranslate"><span class="pre">'cr'</span></code></p></li>
</ul>
<p>Value matching is <strong>case insensitive</strong>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – string representation of linesep</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the parsed linesep result,
return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> if input is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> or empty string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#bpc_utils.bpc_utils.Linesep" title="bpc_utils.bpc_utils.Linesep"><code class="xref py py-data docutils literal notranslate"><span class="pre">Linesep</span></code></a>]</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">s</span></code> is an invalid linesep value</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="#bpc_utils.bpc_utils.argparse._linesep_lookup" title="bpc_utils.bpc_utils.argparse._linesep_lookup"><code class="xref py py-data docutils literal notranslate"><span class="pre">_linesep_lookup</span></code></a> for default lookup mapping values.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.parse_positive_integer">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">parse_positive_integer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/argparse.html#parse_positive_integer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.parse_positive_integer" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a positive integer from a string representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – string representation of a positive integer, or just an integer</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the parsed integer result, return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> if input is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> or empty string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.9)"><strong>TypeError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">s</span></code> is not <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">s</span></code> is an invalid positive integer value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.parso_parse">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">parso_parse</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/parsing.html#parso_parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.parso_parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse Python source code with parso.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>]) – the code to be parsed</p></li>
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – an optional source file name to provide a context in case of error</p></li>
<li><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – parse the code as this version (uses the latest version by default)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://parso.readthedocs.io/en/latest/docs/parser-tree.html#parso.python.tree.Module" title="(in parso v0.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>parso AST</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#bpc_utils.BPCSyntaxError" title="bpc_utils.BPCSyntaxError"><strong>BPCSyntaxError</strong></a> – when source code contains syntax errors</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.recover_files">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">recover_files</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_file_or_dir</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/fileprocessing.html#recover_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.recover_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Recover files from a <em>tar</em> archive, optionally removing the archive file and archive directory after recovery.</p>
<p>This function supports three modes:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Normal mode (when <code class="docutils literal notranslate"><span class="pre">rr</span></code> and <code class="docutils literal notranslate"><span class="pre">rs</span></code> are both <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>):</dt><dd><p>Recover from the archive file specified by <code class="docutils literal notranslate"><span class="pre">archive_file_or_dir</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Recover and remove (when <code class="docutils literal notranslate"><span class="pre">rr</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>):</dt><dd><p>Recover from the archive file specified by <code class="docutils literal notranslate"><span class="pre">archive_file_or_dir</span></code>, and remove this archive file after recovery.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Recover from the only file in the archive directory (when <code class="docutils literal notranslate"><span class="pre">rs</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>):</dt><dd><p>If the directory specified by <code class="docutils literal notranslate"><span class="pre">archive_file_or_dir</span></code> contains exactly one (regular) file, recover from that
file and remove the archive directory.</p>
</dd>
</dl>
</li>
</ul>
<p>Specifying both <code class="docutils literal notranslate"><span class="pre">rr</span></code> and <code class="docutils literal notranslate"><span class="pre">rs</span></code> as <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> is not accepted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive_file</strong> – path to the <em>tar</em> archive file, or the archive directory</p></li>
<li><p><strong>rr</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether to run in “recover and remove” mode</p></li>
<li><p><strong>rs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether to run in “recover from the only file in the archive directory” mode</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – when <code class="docutils literal notranslate"><span class="pre">rr</span></code> and <code class="docutils literal notranslate"><span class="pre">rs</span></code> are both <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a></p></li>
<li><p><a class="reference internal" href="#bpc_utils.BPCRecoveryError" title="bpc_utils.BPCRecoveryError"><strong>BPCRecoveryError</strong></a> – when <code class="docutils literal notranslate"><span class="pre">rs</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, and the directory specified by <code class="docutils literal notranslate"><span class="pre">archive_file_or_dir</span></code>
    is empty, contains more than one item, or contains a non-regular file</p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt id="bpc_utils.bpc_utils.Linesep">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.</span></code><code class="sig-name descname"><span class="pre">Linesep</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.Linesep" title="Permalink to this definition">¶</a></dt>
<dd><p>Type alias for <code class="docutils literal notranslate"><span class="pre">Literal['\n',</span> <span class="pre">'\r\n',</span> <span class="pre">'\r']</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="internal-utilities">
<h2>Internal utilities<a class="headerlink" href="#internal-utilities" title="Permalink to this headline">¶</a></h2>
<dl class="py data">
<dt id="bpc_utils.bpc_utils.argparse._boolean_state_lookup">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.argparse.</span></code><code class="sig-name descname"><span class="pre">_boolean_state_lookup</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.argparse._boolean_state_lookup" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Final[Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a>]]</p>
</dd>
</dl>
<p>A mapping from string representation to boolean states.
The values are used for <a class="reference internal" href="#bpc_utils.parse_boolean_state" title="bpc_utils.parse_boolean_state"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_boolean_state()</span></code></a>.</p>
</dd></dl>

<dl class="py data">
<dt id="bpc_utils.bpc_utils.argparse._linesep_lookup">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.argparse.</span></code><code class="sig-name descname"><span class="pre">_linesep_lookup</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.argparse._linesep_lookup" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Final[Dict[str, <a class="reference internal" href="#bpc_utils.bpc_utils.Linesep" title="bpc_utils.bpc_utils.Linesep"><code class="xref py py-data docutils literal notranslate"><span class="pre">Linesep</span></code></a>]]</p>
</dd>
</dl>
<p>A mapping from string representation to linesep.
The values are used for <a class="reference internal" href="#bpc_utils.parse_linesep" title="bpc_utils.parse_linesep"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_linesep()</span></code></a>.</p>
</dd></dl>

<dl class="py data">
<dt id="bpc_utils.bpc_utils.fileprocessing.has_gz_support">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.fileprocessing.</span></code><code class="sig-name descname"><span class="pre">has_gz_support</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.fileprocessing.has_gz_support" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p>
</dd>
</dl>
<p>Whether gzip is supported.</p>
</dd></dl>

<dl class="py data">
<dt id="bpc_utils.fileprocessing.LOOKUP_TABLE">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.fileprocessing.</span></code><code class="sig-name descname"><span class="pre">LOOKUP_TABLE</span></code><em class="property"><span class="pre">:</span> <span class="pre">Final</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">'_lookup_table.json'</span></em><a class="headerlink" href="#bpc_utils.fileprocessing.LOOKUP_TABLE" title="Permalink to this definition">¶</a></dt>
<dd><p>File name for the lookup table in the archive file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Final[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.fileprocessing.is_python_filename">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.fileprocessing.</span></code><code class="sig-name descname"><span class="pre">is_python_filename</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/fileprocessing.html#is_python_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.fileprocessing.is_python_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether a file is a Python source file by its extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the name of the file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>whether the file is a Python source file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.fileprocessing.expand_glob_iter">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.fileprocessing.</span></code><code class="sig-name descname"><span class="pre">expand_glob_iter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/fileprocessing.html#expand_glob_iter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.fileprocessing.expand_glob_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper function to perform glob expansion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – the pattern to expand</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>an iterator of expansion result</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="bpc_utils.logging.BPCLogHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.logging.</span></code><code class="sig-name descname"><span class="pre">BPCLogHandler</span></code><a class="reference internal" href="_modules/bpc_utils/logging.html#BPCLogHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.logging.BPCLogHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/logging.handlers.html#logging.StreamHandler" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.StreamHandler</span></code></a></p>
<p>Handler used to format BPC logging records.</p>
<p>Initialize BPCLogHandler.</p>
<dl class="py method">
<dt id="bpc_utils.logging.BPCLogHandler.format">
<code class="sig-name descname"><span class="pre">format</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/logging.html#BPCLogHandler.format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.logging.BPCLogHandler.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the specified record based on log level.</p>
<p>The record will be formatted based on its log level
in the following flavour:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DEBUG</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[%(levelname)s]</span> <span class="pre">%(asctime)s</span> <span class="pre">%(message)s</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INFO</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">%(message)s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">WARNING</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Warning:</span> <span class="pre">%(message)s</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Error:</span> <span class="pre">%(message)s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Error:</span> <span class="pre">%(message)s</span></code></p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>record</strong> (<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.LogRecord" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogRecord</span></code></a>) – the log record</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the formatted log string</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.logging.BPCLogHandler.format_templates">
<code class="sig-name descname"><span class="pre">format_templates</span></code><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{'CRITICAL':</span> <span class="pre">'Error:</span> <span class="pre">%(message)s',</span> <span class="pre">'DEBUG':</span> <span class="pre">'[%(levelname)s]</span> <span class="pre">%(asctime)s</span> <span class="pre">%(message)s',</span> <span class="pre">'ERROR':</span> <span class="pre">'Error:</span> <span class="pre">%(message)s',</span> <span class="pre">'INFO':</span> <span class="pre">'%(message)s',</span> <span class="pre">'WARNING':</span> <span class="pre">'Warning:</span> <span class="pre">%(message)s'}</span></em><a class="headerlink" href="#bpc_utils.logging.BPCLogHandler.format_templates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.logging.BPCLogHandler.time_format">
<code class="sig-name descname"><span class="pre">time_format</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'%Y-%m-%d</span> <span class="pre">%H:%M:%S.%f%z'</span></em><a class="headerlink" href="#bpc_utils.logging.BPCLogHandler.time_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py data">
<dt id="bpc_utils.bpc_utils.misc.is_windows">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.misc.</span></code><code class="sig-name descname"><span class="pre">is_windows</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.misc.is_windows" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p>
</dd>
</dl>
<p>Whether the current operating system is Windows.</p>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.misc.current_time_with_tzinfo">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.misc.</span></code><code class="sig-name descname"><span class="pre">current_time_with_tzinfo</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#current_time_with_tzinfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.misc.current_time_with_tzinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current time with local time zone information.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>datetime object representing current time with local time zone information</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="bpc_utils.misc.MakeTextIO">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">bpc_utils.misc.</span></code><code class="sig-name descname"><span class="pre">MakeTextIO</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#MakeTextIO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.misc.MakeTextIO" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Context wrapper class to handle <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> and <em>file</em> objects together.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><strong>obj</strong></a> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>TextIO</em><em>]</em>) – the object to manage in the context</p></li>
<li><p><a class="reference internal" href="#bpc_utils.misc.MakeTextIO.sio" title="bpc_utils.misc.MakeTextIO.sio"><strong>sio</strong></a> (<em>Optional</em><em>[</em><em>StringIO</em><em>]</em>) – the I/O object to manage in the context
only if <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></li>
<li><p><a class="reference internal" href="#bpc_utils.misc.MakeTextIO.pos" title="bpc_utils.misc.MakeTextIO.pos"><strong>pos</strong></a> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>]</em>) – the original offset of <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a>,
only if <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is a seekable <em>file</em> object</p></li>
</ul>
</dd>
</dl>
<p>Initialize context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>obj</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TextIO" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextIO</span></code></a>]) – the object to manage in the context</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="bpc_utils.misc.MakeTextIO.obj">
<code class="sig-name descname"><span class="pre">obj</span></code><a class="headerlink" href="#bpc_utils.misc.MakeTextIO.obj" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a>, TextIO]</p>
</dd>
</dl>
<p>The object to manage in the context.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.misc.MakeTextIO.sio">
<code class="sig-name descname"><span class="pre">sio</span></code><a class="headerlink" href="#bpc_utils.misc.MakeTextIO.sio" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>StringIO</p>
</dd>
</dl>
<p>The I/O object to manage in the context only if
<a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="bpc_utils.misc.MakeTextIO.pos">
<code class="sig-name descname"><span class="pre">pos</span></code><a class="headerlink" href="#bpc_utils.misc.MakeTextIO.pos" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
<p>The original offset of <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a>,
if only <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is a seekable
<a class="reference external" href="https://docs.python.org/3/library/io.html#io.TextIOWrapper" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextIO</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.misc.MakeTextIO.__enter__">
<code class="sig-name descname"><span class="pre">__enter__</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#MakeTextIO.__enter__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.misc.MakeTextIO.__enter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Enter context.</p>
<ul class="simple">
<li><p>If <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, a
<a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code></a> will be created and returned.</p></li>
<li><p>If <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is a seekable <em>file</em> object,
it will be seeked to the beginning and returned.</p></li>
<li><p>If <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is an unseekable <em>file</em> object,
it will be returned directly.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TextIO" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextIO</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="bpc_utils.misc.MakeTextIO.__exit__">
<code class="sig-name descname"><span class="pre">__exit__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traceback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/misc.html#MakeTextIO.__exit__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.misc.MakeTextIO.__exit__" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit context.</p>
<ul class="simple">
<li><p>If <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, the
<a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code></a> (<a class="reference internal" href="#bpc_utils.misc.MakeTextIO.sio" title="bpc_utils.misc.MakeTextIO.sio"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.sio</span></code></a>) will be closed.</p></li>
<li><p>If <a class="reference internal" href="#bpc_utils.misc.MakeTextIO.obj" title="bpc_utils.misc.MakeTextIO.obj"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.obj</span></code></a> is a seekable <em>file</em> object,
its stream position (<a class="reference internal" href="#bpc_utils.misc.MakeTextIO.pos" title="bpc_utils.misc.MakeTextIO.pos"><code class="xref py py-attr docutils literal notranslate"><span class="pre">self.pos</span></code></a>) will be recovered.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt id="bpc_utils.bpc_utils.multiprocessing.CPU_CNT">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.multiprocessing.</span></code><code class="sig-name descname"><span class="pre">CPU_CNT</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.multiprocessing.CPU_CNT" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
<p>Number of CPUs for multiprocessing support.</p>
</dd></dl>

<dl class="py data">
<dt id="bpc_utils.bpc_utils.multiprocessing.mp">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.multiprocessing.</span></code><code class="sig-name descname"><span class="pre">mp</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.multiprocessing.mp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[ModuleType]</p>
</dd>
<dt class="field-even">Value</dt>
<dd class="field-even"><p>&lt;module ‘multiprocessing’&gt;</p>
</dd>
</dl>
<p>An alias of the Python builtin <a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> module if available.</p>
</dd></dl>

<dl class="py data">
<dt id="bpc_utils.bpc_utils.multiprocessing.parallel_available">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.multiprocessing.</span></code><code class="sig-name descname"><span class="pre">parallel_available</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.multiprocessing.parallel_available" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></p>
</dd>
</dl>
<p>Whether parallel execution is available.</p>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.multiprocessing._mp_map_wrapper">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.multiprocessing.</span></code><code class="sig-name descname"><span class="pre">_mp_map_wrapper</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/multiprocessing.html#_mp_map_wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.multiprocessing._mp_map_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Map wrapper function for <a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></a>[…, ~T], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>]]) – the function to execute, the positional arguments and the keyword arguments packed into a tuple</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>~T</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the function execution result</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="bpc_utils.multiprocessing._mp_init_lock">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.multiprocessing.</span></code><code class="sig-name descname"><span class="pre">_mp_init_lock</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lock</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bpc_utils/multiprocessing.html#_mp_init_lock"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bpc_utils.multiprocessing._mp_init_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize lock for <a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing" title="(in Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lock</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ContextManager" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextManager</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]) – the lock to be shared among tasks</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt id="bpc_utils.bpc_utils.multiprocessing.task_lock">
<code class="sig-prename descclassname"><span class="pre">bpc_utils.multiprocessing.</span></code><code class="sig-name descname"><span class="pre">task_lock</span></code><a class="headerlink" href="#bpc_utils.bpc_utils.multiprocessing.task_lock" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ContextManager[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a>]</p>
</dd>
</dl>
<p>A lock for possibly concurrent tasks.</p>
</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">bpc-utils</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pybpc&repo=bpc-utils&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Python Backport Compiler Project.
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/pybpc/bpc-utils" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>